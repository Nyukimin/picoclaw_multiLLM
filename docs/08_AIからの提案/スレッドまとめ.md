# このスレッドまとめ（ツール拡張の話）

## 1. JSで参考にしたい、の結論
- 参考にすべき中心は **JSそのもの**より **プラグイン方式**（manifest＋entry、registerでTool追加、Toolをカタログ化）。
- 手順（やり方）は状況で変える前提なら、固定すべきは **“道具の形”**（入力/出力/権限/タイムアウト/ログ）。
- 安定運用の鍵は **プロセス分離（安全）** と **権限の最小化（allowlist）**。

## 2. Skillは増やせるが、増えるのは「やり方」
- Skill（SKILL.md）は増やせる。
- ただしSkillは **手順書**であり、**新しい実行能力（できること）は増えない**。
- 「できること」を増やすなら、増やす対象は **Tool/Plugin（JS/TSなどの実行物）**。

## 3. PicoClawが問題解決する際に「ツールを作る/使う」シチュエーションはある
ある。特に「作る」判断が合理的になりやすい条件は次の通り。
- 同じ作業を繰り返す（2回以上やる）
- 間違えると痛い（契約書・設定変更・重要な抽出など）
- I/Oや整形が多い（大量ページ/大量ログ/保存や差分など）
- 外部連携が必要（LINE/Slack/GitHub/Obsidian/Tailscale等）
- 監査・追跡が必要（EventIdで追いたい、ログを残したい）

## 4. 「足りないツール」はWorkerで決められる？
決められる。ただし安定のために役割を分けるのがコツ。
- Worker：不足を検出し、**ToolRequest（仕様）** を出す（コードを書かない）
- Coder：ToolRequestに沿って実装・ビルド・登録
- Chat：危険な権限要求や代替可否をルールで判定（ガード役）

### ToolRequestに入れるべき最小要素（おすすめ）
- tool名、目的
- 入力/出力（JSON Schema）
- 必要権限（net / fs:read / fs:write / exec など）
- 制約（例：workspace配下のみ書き込み、冪等性、タイムアウト）
- 想定エラー
- 受け入れテスト（最低3つ程度）
- EventIdの扱い（必須注入・ログ）

## 5. 「標準で入ってる？」（改変は減らしたい）
### PicoClaw
- “ツールを呼ぶ”ループ自体は前提としてある。
- ただし「不足検出 → 新ツール生成 → 自動登録 → 再実行」までを **コアが閉ループで面倒を見る標準機能**としては前提になっていない（少なくともこのスレッドで扱った範囲）。
- 改変を減らす落とし所：WorkerはToolRequestを吐くだけにして、実装と登録は外（Coder＋手動/半自動）で回す。

### OpenClaw（オリジナル）
- **拡張口（プラグインでToolを追加）は標準である**。
- 既存スキル/拡張を検索して取り込む方向性もある。
- 一方で「新ツール生成の閉ループ」までを **コア標準**でやる設計とは別物で、基本は「人が拡張を書く」寄り。

## 6. このスレッドの最終到達点（運用の型）
- 手順は状況で変えてよい。
- だから増やすべきは **“道具（Tool）”**。
- 最小改変で回すなら、この型が強い：
  1) ツールカタログ（使える道具一覧）を整備  
  2) Workerがカタログと照合して不足をToolRequest化  
  3) Coderが実装して登録  
  4) Workerが新ツールで再実行して完走  

この型なら、PicoClaw本体の改変を最小化しつつ、「できること」だけを積み上げられる。
